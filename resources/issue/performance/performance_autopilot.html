<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="8895"/>

<div>
<span><div><div><div><br/></div><div><span style="font-size: 14pt;">目标</span></div><div><font style="font-size: 14pt;"><br/></font></div><hr/><div><font style="font-size: 14pt;"><br/></font></div><div><span style="font-size: 14pt;"><img src="performance_autopilot_files\en_todo.png"/>在泊车应出现时候,优化个应用资源占用</span></div><div style="margin-left: 40px;"><span style="font-size: 14pt;"><img src="performance_autopilot_files\en_todo [1].png"/>Ai助手</span></div><div style="margin-left: 40px;"><span style="font-size: 14pt;"><img src="performance_autopilot_files\en_todo [2].png"/>地图</span></div><div style="margin-left: 40px;"><span style="font-size: 14pt;"><img src="performance_autopilot_files\en_todo [3].png"/>空调</span></div><div style="margin-left: 40px;"><span style="font-size: 14pt;"><img src="performance_autopilot_files\en_todo [4].png"/>车控</span></div><div style="margin-left: 40px;"><span style="font-size: 14pt;"><img src="performance_autopilot_files\en_todo [5].png"/>蓝牙电话</span></div><div style="margin-left: 40px;"><span style="font-size: 14pt;"><img src="performance_autopilot_files\en_todo [6].png"/>音乐</span></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 14pt;">实现路径</span></div><div><font style="font-size: 14pt;"><br/></font></div><div><br/></div><hr/><div><br/></div><ul><li><div><span style="font-size: 12pt;">泊车应用启动空的Activity,触发系统通知到此时在泊车下面的应用onPause,停止绘制,以及动画等. 解决泊车时,在泊车下面的应用的负载.</span></div></li></ul><div><span style="font-size: 12pt;"><br/></span></div><ul><li><div><span style="font-size: 12pt;">发送IPC消息,告知其他应用,泊车应用启动了,应用本身是否需要释放部分计算资源,来降低负载.关闭时也会发送消息过来,告知应用</span></div></li><ul><li><div><span style="font-size: 12pt;"> IPC消息为 </span></div></li><ul><li><div><span style="font-size: 12pt;">IpcConfig.AutopilotConfig.REMOTE_COMMAND_AUTOPILOT_WINDOW_CLOSED</span></div></li><li><div><span style="font-size: 12pt;">IpcConfig.AutopilotConfig.REMOTE_COMMAND_AUTOPILOT_WINDOW_OPENED;</span></div></li></ul></ul></ul><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 14pt;">具体实现</span></div><div><span style="font-size: 12pt;"><br/></span></div></div><hr/><div><br/></div><div><br/></div><ul><li><div><span style="font-size: 12pt;">利用系统API onAttachedToWindow/onDetachedFromWindow 确保成对出现</span></div></li></ul><div><br/></div><div><br/></div><div style="background-color: rgb(43, 43, 43); font-size: 10.8pt;"><br/></div><div style="background-color: rgb(43, 43, 43); font-size: 10.8pt;"><div><span style="color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">@Override</span></div><div><span style="color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">protected void </span><span style="background-color: rgb(43, 43, 43); font-size: 10.8pt; color: rgb(255, 198, 109); font-family: &quot;Courier New&quot;;">onAttachedToWindow</span><span style="color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">() {</span></div><div><span style="color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">   </span><span style="background-color: rgb(43, 43, 43); font-size: 10.8pt; color: rgb(255, 198, 109); font-family: &quot;Courier New&quot;;">sendAutoPilotShowIPC</span><span style="color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">();</span></div><div style="background-color:rgb(43, 43, 43);color:rgb(169, 183, 198);font-family:&quot;Courier New&quot;;font-size:10.8pt;"><span style="color: #cc7832;"><span>    </span>if</span> (BuildConfig.<span style="color: #9876aa; font-style: italic;">DEBUG</span>) {</div><div style="background-color:rgb(43, 43, 43);color:rgb(169, 183, 198);font-family:&quot;Courier New&quot;;font-size:10.8pt;"><span>    </span><span>    </span>Log.<span style="font-style: italic;">i</span>(<span style="color: #6a8759;">&quot;ParkingMainWidget&quot;</span><span style="color: #cc7832;">,</span> <span style="color: #6a8759;">&quot;sendAutoPilotShowIPC&quot;</span>)<span style="color: #cc7832;">;</span></div><div style="background-color:rgb(43, 43, 43);color:rgb(169, 183, 198);font-family:&quot;Courier New&quot;;font-size:10.8pt;"><span>    </span>}</div><div><span style="color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">}</span></div><div><br/></div></div><div><br/></div><div><div><br/></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="background-color: rgb(43, 43, 43); font-size: 10.8pt;"><br/></div><div style="background-color: rgb(43, 43, 43); font-size: 10.8pt;"><div><span style="color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">@Override</span></div><div><span style="color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">protected void </span><span style="background-color: rgb(43, 43, 43); font-size: 10.8pt; color: rgb(255, 198, 109); font-family: &quot;Courier New&quot;;">onDetachedFromWindow</span><span style="color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">() {</span></div><div><span style="color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">   </span><span style="background-color: rgb(43, 43, 43); font-size: 10.8pt; color: rgb(255, 198, 109); font-family: &quot;Courier New&quot;;">sendAutopilotCloseIPC</span><span style="color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">();</span></div><div><span style="color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;"><span>    </span></span><span style="background-color:rgb(43, 43, 43);color:rgb(169, 183, 198);font-family:&quot;Courier New&quot;;font-size:10.8pt;"><span style="background-color: rgb(43, 43, 43); color: #cc7832; font-family: &quot;Courier New&quot;; font-size: 10.8pt;">if</span> <span style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">(BuildConfig.</span><span style="background-color: rgb(43, 43, 43); color: #9876aa; font-family: &quot;Courier New&quot;; font-size: 10.8pt; font-style: italic;">DEBUG</span><span style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">) {</span></span></div><div style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;"><span style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">    </span><span style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">    </span><span style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">Log.</span><span style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt; font-style: italic;">i</span><span style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">(</span><span style="background-color: rgb(43, 43, 43); color: #6a8759; font-family: &quot;Courier New&quot;; font-size: 10.8pt;">&quot;ParkingMainWidget&quot;</span><span style="background-color: rgb(43, 43, 43); color: #cc7832; font-family: &quot;Courier New&quot;; font-size: 10.8pt;">,</span> <span style="background-color: rgb(43, 43, 43); color: #6a8759; font-family: &quot;Courier New&quot;; font-size: 10.8pt;">&quot;</span><span style="background-color: rgb(43, 43, 43); font-size: 10.8pt; color: rgb(255, 198, 109); font-family: &quot;Courier New&quot;;">sendAutopilotCloseIPC</span><span style="background-color: rgb(43, 43, 43); color: #6a8759; font-family: &quot;Courier New&quot;; font-size: 10.8pt;">&quot;</span><span style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">)</span><span style="background-color: rgb(43, 43, 43); color: #cc7832; font-family: &quot;Courier New&quot;; font-size: 10.8pt;">;</span></div><div style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;"><span style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">    </span><span style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">}</span></div><div><span style="color: rgb(169, 183, 198); font-family: &quot;Courier New&quot;; font-size: 10.8pt;">}</span></div><div><br/></div></div><div style="background-color:rgb(43, 43, 43);color:rgb(169, 183, 198);font-family:&quot;Courier New&quot;;font-size:10.8pt;"></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">APK</span><br/></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><br/>
debug_E1  大屏上<br/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="performance_autopilot_files/xp_Autopilot_debug.apk"><img src="performance_autopilot_files/146dde4f7f1096e6a4e1480d71b5fe74.png" alt="xp_Autopilot_debug.apk"></a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div>release_E5 版  真车上</div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="performance_autopilot_files/xp_Autopilot_signed.apk"><img src="performance_autopilot_files/53601f6b41dc1446230ab303b087d0ba.png" alt="xp_Autopilot_signed.apk"></a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Log </span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">05-22 19:53:24.511 12833-12833/com.xiaopeng.autopilot I/autopilotIPC: sendAutoPilotShowIPC</span></div><div><span style="font-size: 12pt;">05-22 19:53:24.511 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90013     to :    com.xiaopeng.aiassistant</span></div><div><span style="font-size: 12pt;">05-22 19:53:24.511 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90013     to :    com.xiaopeng.montecarlo</span></div><div><span style="font-size: 12pt;">05-22 19:53:24.511 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90013     to :    com.android.systemui</span></div><div><span style="font-size: 12pt;">05-22 19:53:24.511 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90013     to :    com.xiaopeng.carcontrol</span></div><div><span style="font-size: 12pt;">05-22 19:53:24.521 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90013     to :    com.xiaopeng.btphone</span></div><div><span style="font-size: 12pt;">05-22 19:53:24.521 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90013     to :    com.xiaopeng.musicradio</span></div><div><span style="font-size: 12pt;">05-22 19:53:24.521 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90013     to :    com.xiaopeng.xmart.camera</span></div><div><span style="font-size: 12pt;">05-22 19:53:34.881 12833-12833/com.xiaopeng.autopilot I/autopilotIPC: sendAutopilotCloseIPC</span></div><div><span style="font-size: 12pt;">05-22 19:53:34.881 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90012     to :    com.xiaopeng.aiassistant</span></div><div><span style="font-size: 12pt;">05-22 19:53:34.881 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90012     to :    com.xiaopeng.montecarlo</span></div><div><span style="font-size: 12pt;">05-22 19:53:34.881 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90012     to :    com.android.systemui</span></div><div><span style="font-size: 12pt;">05-22 19:53:34.881 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90012     to :    com.xiaopeng.carcontrol</span></div><div><span style="font-size: 12pt;">05-22 19:53:34.881 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90012     to :    com.xiaopeng.btphone</span></div><div><span style="font-size: 12pt;">05-22 19:53:34.881 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90012     to :    com.xiaopeng.musicradio</span></div><div><span style="font-size: 12pt;">05-22 19:53:34.881 12833-12864/com.xiaopeng.autopilot I/autopilotIPC: send Ipc msg id:90012     to :    com.xiaopeng.xmart.camera</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">注意事项: </span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><ul><li><div><span style="font-size: 12pt;">请各位完成后同步下面表格内容</span></div></li><ul><li><div><a href="https://drive.wps.cn/view/l/sC8G1CN1X?f=101%3Ff%3D101" style="font-size: 12pt;">https://drive.wps.cn/view/l/sC8G1CN1X?f=101%3Ff%3D101</a><span style="font-size: 12pt;">  </span><span style="font-size: 12pt;">     sheet / (泊车界面开关应用响应请况)</span></div></li></ul><li><div><span style="font-size: 12pt;">接受消息时要考虑自己所在的场景,是否在topActivity,还是在后台</span></div></li></ul><div><span style="font-size: 12pt;"><br/></span></div><div><br/></div><div><br/></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><br/></div></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 