<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600540 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="7748"/>

<div>
<span><div><div><br/></div><div><br/></div><div><font style="font-size: 16pt;">编写目的</font></div><ul><ul><li><div><font style="font-size: 12pt;">解决个应用之间弹出窗口相互掩盖,相互之间无法通讯的问题.</font></div></li></ul></ul><div><br/></div><div><br/></div><div><font style="font-size: 16pt;">文档范围</font></div><ul><ul><li><div><font style="font-size: 12pt;">此文档之定义个应用之间弹出窗口达到互斥的规则.</font></div></li></ul></ul><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 16pt;">实现原理</span><br/></div><div style="margin-left: 40px;"><span style="font-size: 16pt;"><span>    </span><span>    </span><span>    </span><br/></span></div><div style="margin-left: 40px;"><span style="font-size: 14pt;">IPC See More detail : </span></div><div style="margin-left: 40px;"><a href="http://doc.xiaopeng.local:18090/pages/viewpage.action?pageId=20153439">http://doc.xiaopeng.local:18090/pages/viewpage.action?pageId=20153439</a></div><div><span style="font-size: 16pt;"><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><br/></span></div><div style="margin-left: 120px;"><img src="hc/WindowManager.bmp" type="image/bmp" data-filename="WindowManager.bmp" width="868"/></div><div style="margin-left: 120px;"><br/></div><div style="margin-left: 120px;"><br/></div><div style="margin-left: 40px;"><br/></div><div style="margin-left: 120px;"><br/></div><div style="margin-left: 120px;"><br/></div><div style="margin-left: 120px;"><br/></div><div><font style="font-size: 16pt;">目前互斥应用范围 [</font><font style="font-size: 10pt;">范围是指现在或者将来需要这项能力</font><font style="font-size: 16pt;">]</font></div><div><br/></div><div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col><col style="width: 336px;"></col><col style="width: 207px;"></col><col style="width: 207px;"></col></colgroup><tbody><tr><td style="vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div>序号</div></td><td style="vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">应用名</span></div></td><td style="vertical-align: middle; width: 336px; padding: 8px; border: 1px solid;">包名</td><td style="vertical-align: middle; width: 207px; padding: 8px; border: 1px solid;"><div>时间</div></td><td style="vertical-align: middle; width: 207px; padding: 8px; border: 1px solid;"><div><br/></div></td></tr><tr><td style="vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">1</span></div></td><td style="vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div>空调</div></td><td style="vertical-align: middle; width: 336px; padding: 8px; border: 1px solid;"><div><span style="font-size: 16pt;">com.android.systemui</span></div></td><td style="vertical-align: middle; width: 207px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">2019/1/31</span></div></td><td style="vertical-align: middle; width: 207px; padding: 8px; border: 1px solid;"><div><br/></div></td></tr><tr><td style="vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">2</span></div></td><td style="vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">AI助手</span></div></td><td style="vertical-align: middle; width: 336px; padding: 8px; border: 1px solid;"><div><span style="font-size: 16pt;">com.xiaopeng.aiassistant</span></div></td><td style="vertical-align: middle; width: 207px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">2019/1/31</span></div></td><td style="vertical-align: middle; width: 207px; padding: 8px; border: 1px solid;"><div><br/></div></td></tr><tr><td style="vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">3</span></div></td><td style="vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">自动泊车</span></div></td><td style="vertical-align: middle; width: 336px; padding: 8px; border: 1px solid;"><div><span style="font-size: 16pt;">com.xiaopeng.autopilot</span></div></td><td style="vertical-align: middle; width: 207px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">2019/1/31</span></div></td><td style="vertical-align: middle; width: 207px; padding: 8px; border: 1px solid;"><div><br/></div></td></tr><tr><td style="vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">4</span></div></td><td style="vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">充电</span></div></td><td style="vertical-align: middle; width: 336px; padding: 8px; border: 1px solid;"><div><span style="font-size: 16pt;">com.xiaopeng.chargecontrol</span></div></td><td style="vertical-align: middle; width: 207px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">2019/1/31</span></div></td><td style="vertical-align: middle; width: 207px; padding: 8px; border: 1px solid;"><div><br/></div></td></tr><tr><td style="vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">5</span></div></td><td style="vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">车控</span></div></td><td style="vertical-align: middle; width: 336px; padding: 8px; border: 1px solid;"><div><span style="font-size: 16pt;">com.xiaopeng.carcontrol</span></div></td><td style="vertical-align: middle; width: 207px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt;">2019/1/31</span></div></td><td style="vertical-align: middle; width: 207px; padding: 8px; border: 1px solid;"><div><br/></div></td></tr></tbody></table><div><br/></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 16pt;"><br/></span></div><div style="margin-left: 120px;"><br/></div><div style="margin-left: 120px;"><br/></div><div style="margin-left: 120px;"><br/></div><div><br/></div><div><font style="font-size: 16pt;">接入方法</font></div><div style="margin-left: 40px;"><br/></div><ul><li><div style="margin-left: 40px;"><font style="font-size: 12pt;">注册IPC组件.</font></div></li></ul><div style="margin-left: 40px;"><span style="font-size: 12pt;">    </span><br/></div><div style="margin-left: 40px;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/**</div><div>     * 初始化IPC组件</div><div>     */</div><div>    private void initIPC() {</div><div>        Log.i(TAG, &quot;initIPC&quot;);</div><div>        mIpcService = (IIpcService) Module.get(IpcModuleEntry.class).get(IIpcService.class);</div><div>        EventBus.getDefault().register(XBigDialogEx.this);</div><div>   }</div><div><br/></div><div><br/></div></div><br/></div><div style="margin-left: 40px;"><span style="font-size: 12pt;"><br/></span></div><ul><li><div style="margin-left: 40px;"><font style="font-size: 12pt;">弹出窗口时调用 XUIComponent.notifyWindows(true/false);</font></div></li><li><div style="margin-left: 40px;"><font style="font-size: 12pt;">不需要监听时反注册组件.</font></div></li></ul><div style="margin-left: 40px;"><span style="font-size: 12pt;"><br/></span></div><div style="margin-left: 40px;"><br/></div><div style="margin-left: 40px;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@Override</div><div>    public void dismiss() {</div><div>        Log.i(TAG, &quot;dismiss&quot;);</div><div>        super.dismiss();</div><div>        //窗口关闭,反注册</div><div>        ThreadPoolHelper.postBackground(new Runnable() {</div><div>            @Override</div><div>            public void run() {</div><div>                EventBus.getDefault().unregister(XBigDialogEx.this);</div><div>            }</div><div>        });</div><div>    }</div><div><br/></div><div><br/></div></div></div><div style="margin-left: 40px;"><span style="font-size: 12pt;"><br/></span></div><div style="margin-left: 40px;"><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 16pt;"><br/></font></div><div style="margin-left: 40px;"><span style="font-size: 16pt;">NOTE: </span></div><ul><ul><li><div><font style="font-size: 12pt;">以上版本为未完善版,年后2.15号可接入.</font></div></li></ul></ul><div style="margin-left: 40px;"><br/></div><div style="margin-left: 120px;"><br/></div><div style="margin-left: 120px;"><br/></div><div><br/></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div style="margin-left: 40px;"><br/></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="margin-left: 80px;"><br/></div></div></span>
</div></body></html> 